- name: Homelab
  columns:
    - size: small
      widgets:
        - type: dns-stats
          service: pihole-v6
          url: http://192.168.0.151:8080 # Raspberry Pi 3B
          password: ${PIHOLE_PASSWORD}

        - type: server-stats
          servers:
            - type: local
              name: Raspberry Pi 4B

        - type: server-stats
          servers:
            - type: remote
              name: Raspberry PI 3B+
              url: http://192.168.0.151:27973

        - type: releases
          show-source-icon: true
          token: ${GITHUB_TOKEN}
          repositories:
            - glanceapp/glance
            - traefik/traefik
            - pi-hole/pi-hole
            - portainer/portainer
            - louislam/uptime-kuma
        
    - size: full
      widgets:
        # Icons from: https://dashboardicons.com/icons 
        - type: monitor
          cache: 1m
          title: Homelab Services
          sites:
            - title: Pi-Hole
              url: http://192.168.0.151:8080/admin  
              icon: /assets/pihole-logo.png
            - title: Uptime Kuma
              url: http://192.168.0.151:3001
              icon: /assets/uptime-kuma-logo.png
            - title: OpenMediaVault
              url: http://192.168.0.150:8000
              icon: /assets/openmediavault-logo.png
            - title: Portainer (PI 4B)
              url: http://192.168.0.150:9000
              icon: /assets/portainer-logo.png
            - title: Portainer (PI 3B+)
              url: http://192.168.0.151:9000
              icon: /assets/portainer-logo.png
            - title: PriceBuddy
              url: http://192.168.0.150:5000
              icon: /assets/price-buddy.png

        - type: monitor
          cache: 1m
          title: Hosted Services
          sites:
            - title: Traefik Dashboard
              url: http://traefik.tomtruyen.dev
              icon: /assets/traefik-logo.png
              basic-auth:
                username: ${TRAEFIK_USERNAME}
                password: ${TRAEFIK_PASSWORD}
            - title: Portfolio
              url: https://tomtruyen.dev
              icon: /assets/portfolio-logo.png
            - title: Mailsift
              url: https://mailsift.tomtruyen.dev
              icon: /assets/mailsift-logo.png
            - title: DroidLaunch
              url: https://droidlaunch.tomtruyen.dev
              icon: /assets/droidlaunch-logo.png
            - title: DroidLaunch Docs
              url: https://docs.droidlaunch.tomtruyen.dev
              icon: /assets/droidlaunch-logo.png

        - type: split-column
          widgets:
            - type: custom-api
              title: Docker (Raspberry PI 4B)
              cache: 15m
              url: http://192.168.0.150:9000/api/endpoints/2 # This value comes from the URL, e.g.: http://192.168.0.150:9000/#!/2/docker/dashboard (This is the URL when going to Dashboard page)
              headers:
                X-API-Key: ${PORTAINER_API_KEY_PI4B}
              template: |
                <style>
                  .portainer-icon {
                    display: block;
                    opacity: 0.8;
                    filter: grayscale(0.4);
                    object-fit: contain;
                    aspect-ratio: 1 / 1;
                    width: 3.2rem;
                    position: relative;
                    top: -0.1rem;
                  }
                  .portainer-title {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                  }
                  .docker-icon {
                    width: 24px;
                    height: 24px;
                    object-fit: contain;
                    opacity: 0.8;
                    filter: grayscale(0.4);
                    aspect-ratio: 1 / 1;
                  }
                  .docker-list { 
                    display: flex; 
                    flex-direction: column; 
                  }
                  .docker-item { 
                    display: flex; 
                    align-items: center; 
                    gap: 10px; 
                    padding: 8px 0;
                    border-top: 1px solid var(--color-separator);

                  }
                  .docker-status { width: 8px; height: 8px; border-radius: 50%; display: inline-block; }
                  .docker-text { display: flex; flex-direction: column; min-width: 0; }
                  .docker-name { 
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-weight: 600; 
                    white-space: nowrap; 
                    overflow: hidden; 
                    text-overflow: ellipsis; 
                  }
                  .docker-name
                  .docker-meta { font-size: 0.85em; color: var(--color-secondary); }
                  .list-horizontal-text.no-bullets > *:not(:last-child)::after {
                      content: none !important;
                  }
                  .list-horizontal-text.no-bullets > *:not(:last-child) {
                    margin-right: 1em;
                  }
                </style>
                <div style="display:flex; align-items:center; gap:12px; padding-bottom: 8px;">
                    <div>
                      <img src="assets/portainer-logo.png" class="portainer-icon cached finished-transition">
                    </div>
                    <div style="flex-grow:1; min-width:0;">
                      <a class="size-h3 block text-truncate color-highlight" href="http://192.168.0.150:9000" target="_blank" rel="noopener">
                        {{ .JSON.String "Name" }}
                      </a>
                      <ul class="list-horizontal-text no-bullets">
                        <li data-popover-type="text" data-popover-text="Containers: {{ .JSON.Int "Snapshots.0.ContainerCount" }}">
                          <p style="display:inline-flex;align-items:center;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="height:1em;vertical-align:middle;margin-right:0.5em;" class="size-6 lucide lucide-box icon inline-flex" aria-hidden="true" role="img"><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"></path><path d="m3.3 7 8.7 5 8.7-5"></path><path d="M12 22V12"></path></svg>
                            {{ .JSON.Int "Snapshots.0.ContainerCount" }}
                          </p>
                        </li>
                        <li data-popover-type="text" data-popover-text="Volumes: {{ .JSON.Int "Snapshots.0.VolumeCount" }}">
                          <p style="display:inline-flex;align-items:center;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="height:1em;vertical-align:middle;margin-right:0.5em;" class="size-6 lucide lucide-database icon inline-flex" aria-hidden="true" role="img"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M3 5V19A9 3 0 0 0 21 19V5"></path><path d="M3 12A9 3 0 0 0 21 12"></path></svg>
                            {{ .JSON.Int "Snapshots.0.VolumeCount"  }}
                          </p>
                        </li>
                        <li data-popover-type="text" data-popover-text="Networks: {{ .JSON.Int "Snapshots.0.DockerSnapshotRaw.Networks.#" }}">
                          <p style="display:inline-flex;align-items:center;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="height:1em;vertical-align:middle;margin-right:0.5em;" class="size-6 lucide lucide-network icon inline-flex" aria-hidden="true" role="img"><rect x="16" y="16" width="6" height="6" rx="1"></rect><rect x="2" y="16" width="6" height="6" rx="1"></rect><rect x="9" y="2" width="6" height="6" rx="1"></rect><path d="M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"></path><path d="M12 12V8"></path></svg>
                            {{ .JSON.Int "Snapshots.0.DockerSnapshotRaw.Networks.#" }}
                          </p>
                        </li>
                      </ul>
                    </div>
                </div>
                <div class="docker-list">
                  {{ range .JSON.Array "Snapshots.0.DockerSnapshotRaw.Containers" }}
                  <div class="docker-item">
                    <img src="https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons/svg/docker.svg" class="docker-icon" />
                    <div class="docker-text">
                      <div class="docker-name">
                        {{ .String "Names.0" | trimPrefix "/" }}
                        <ul class="list-horizontal-text no-bullets">
                          <li data-popover-type="text" data-popover-text="State: {{ .String "State" }}">
                            <span class="docker-status" style="background-color: {{ if eq (.String "State") "running" }}var(--color-positive){{ else }}var(--color-negative){{ end }}"></span>
                          </li>
                        </ul>
                      </div>
                      <div class="docker-meta">
                        {{ .String "Image" }}
                        {{ $maxPort := 0 }}
                        {{ range .Array "Ports" }}
                          {{ if and
                              (eq (.String "Type") "tcp")
                              (gt (.Int "PublicPort") 0)
                              (eq (.String "IP") "::")
                          }}
                            {{ if gt (.Int "PublicPort") $maxPort }}
                              {{ $maxPort = (.Int "PublicPort") }}
                            {{ end }}
                          {{ end }}
                        {{ end }}
                        {{ if gt $maxPort 0 }}(:{{ $maxPort }}){{ end }}
                      </div>
                    </div>
                  </div>
                  {{ end }}
                </div>

            - type: custom-api
              title: Docker (Raspberry PI 3B+)
              cache: 15m
              url: http://192.168.0.151:9000/api/endpoints/2 # This value comes from the URL, e.g.: http://192.168.0.151:9000/#!/2/docker/dashboard (This is the URL when going to Dashboard page)
              headers:
                X-API-Key: ${PORTAINER_API_KEY_PI3B}
              template: |
                <style>
                  .portainer-icon {
                    display: block;
                    opacity: 0.8;
                    filter: grayscale(0.4);
                    object-fit: contain;
                    aspect-ratio: 1 / 1;
                    width: 3.2rem;
                    position: relative;
                    top: -0.1rem;
                  }
                  .portainer-title {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                  }
                  .docker-icon {
                    width: 24px;
                    height: 24px;
                    object-fit: contain;
                    opacity: 0.8;
                    filter: grayscale(0.4);
                    aspect-ratio: 1 / 1;
                  }
                  .docker-list { 
                    display: flex; 
                    flex-direction: column; 
                  }
                  .docker-item { 
                    display: flex; 
                    align-items: center; 
                    gap: 10px; 
                    padding: 8px 0;
                    border-top: 1px solid var(--color-separator);

                  }
                  .docker-status { width: 8px; height: 8px; border-radius: 50%; display: inline-block; }
                  .docker-text { display: flex; flex-direction: column; min-width: 0; }
                  .docker-name { 
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-weight: 600; 
                    white-space: nowrap; 
                    overflow: hidden; 
                    text-overflow: ellipsis; 
                  }
                  .docker-name
                  .docker-meta { font-size: 0.85em; color: var(--color-secondary); }
                  .list-horizontal-text.no-bullets > *:not(:last-child)::after {
                      content: none !important;
                  }
                  .list-horizontal-text.no-bullets > *:not(:last-child) {
                    margin-right: 1em;
                  }
                </style>
                <div style="display:flex; align-items:center; gap:12px; padding-bottom: 8px;">
                    <div>
                      <img src="assets/portainer-logo.png" class="portainer-icon cached finished-transition">
                    </div>
                    <div style="flex-grow:1; min-width:0;">
                      <a class="size-h3 block text-truncate color-highlight" href="http://192.168.0.151:9000" target="_blank" rel="noopener">
                        {{ .JSON.String "Name" }}
                      </a>
                      <ul class="list-horizontal-text no-bullets">
                        <li data-popover-type="text" data-popover-text="Containers: {{ .JSON.Int "Snapshots.0.ContainerCount" }}">
                          <p style="display:inline-flex;align-items:center;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="height:1em;vertical-align:middle;margin-right:0.5em;" class="size-6 lucide lucide-box icon inline-flex" aria-hidden="true" role="img"><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"></path><path d="m3.3 7 8.7 5 8.7-5"></path><path d="M12 22V12"></path></svg>
                            {{ .JSON.Int "Snapshots.0.ContainerCount" }}
                          </p>
                        </li>
                        <li data-popover-type="text" data-popover-text="Volumes: {{ .JSON.Int "Snapshots.0.VolumeCount" }}">
                          <p style="display:inline-flex;align-items:center;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="height:1em;vertical-align:middle;margin-right:0.5em;" class="size-6 lucide lucide-database icon inline-flex" aria-hidden="true" role="img"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M3 5V19A9 3 0 0 0 21 19V5"></path><path d="M3 12A9 3 0 0 0 21 12"></path></svg>
                            {{ .JSON.Int "Snapshots.0.VolumeCount"  }}
                          </p>
                        </li>
                        <li data-popover-type="text" data-popover-text="Networks: {{ .JSON.Int "Snapshots.0.DockerSnapshotRaw.Networks.#" }}">
                          <p style="display:inline-flex;align-items:center;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="height:1em;vertical-align:middle;margin-right:0.5em;" class="size-6 lucide lucide-network icon inline-flex" aria-hidden="true" role="img"><rect x="16" y="16" width="6" height="6" rx="1"></rect><rect x="2" y="16" width="6" height="6" rx="1"></rect><rect x="9" y="2" width="6" height="6" rx="1"></rect><path d="M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"></path><path d="M12 12V8"></path></svg>
                            {{ .JSON.Int "Snapshots.0.DockerSnapshotRaw.Networks.#" }}
                          </p>
                        </li>
                      </ul>
                    </div>
                </div>
                <div class="docker-list">
                  {{ range .JSON.Array "Snapshots.0.DockerSnapshotRaw.Containers" }}
                  <div class="docker-item">
                    <img src="https://cdn.jsdelivr.net/gh/homarr-labs/dashboard-icons/svg/docker.svg" class="docker-icon" />
                    <div class="docker-text">
                      <div class="docker-name">
                        {{ .String "Names.0" | trimPrefix "/" }}
                        <ul class="list-horizontal-text no-bullets">
                          <li data-popover-type="text" data-popover-text="State: {{ .String "State" }}">
                            <span class="docker-status" style="background-color: {{ if eq (.String "State") "running" }}var(--color-positive){{ else }}var(--color-negative){{ end }}"></span>
                          </li>
                        </ul>
                      </div>
                      <div class="docker-meta">
                        {{ .String "Image" }}
                        {{ $maxPort := 0 }}
                        {{ range .Array "Ports" }}
                          {{ if and
                              (eq (.String "Type") "tcp")
                              (gt (.Int "PublicPort") 0)
                              (eq (.String "IP") "::")
                          }}
                            {{ if gt (.Int "PublicPort") $maxPort }}
                              {{ $maxPort = (.Int "PublicPort") }}
                            {{ end }}
                          {{ end }}
                        {{ end }}
                        {{ if gt $maxPort 0 }}(:{{ $maxPort }}){{ end }}
                      </div>
                    </div>
                  </div>
                  {{ end }}
                </div>
    - size: small
      widgets:
        - type: to-do

        - type: reddit
          subreddit: selfhosted
          show-thumbnails: true
          limit: 20
          collapse-after: 5

